(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-454f"],{"3f69":function(t,e,o){},"4c73":function(t,e,o){"use strict";var i=o("3f69"),s=o.n(i);s.a},b67e:function(t,e,o){"use strict";o.r(e);var i,s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("d2-container",[o("template",{slot:"header"},[o("el-row",[o("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:3}},[o("el-alert",{attrs:{title:"商品信息管理",type:"info",closable:!1}})],1),o("el-col",{attrs:{span:10}},[o("el-button",{attrs:{type:"primary",plain:""},on:{click:t.add_good}},[t._v("添加")]),o("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){t.dialogVisible=!0}}},[t._v("导入商品信息")]),o("el-button",{attrs:{type:"warning",plain:""},on:{click:t.land}},[t._v("导出商品信息")])],1)],1)],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),o("el-table-column",{attrs:{type:"index",width:"50"}}),o("el-table-column",{attrs:{prop:"goods_title",label:"商品名称",width:"180"}}),o("el-table-column",{attrs:{prop:"goods_desc",label:"商品描述",width:"180"}}),o("el-table-column",{attrs:{prop:"goods_price",label:"零售价--单位￥"}}),o("el-table-column",{attrs:{prop:"goods_original_price",label:"进价--单位￥"}}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",plain:""},on:{click:function(o){t.edit_val(e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{type:"danger",plain:""},on:{click:function(o){t.del_val(e.row)}}},[t._v("删除")])]}}])})],1),o("el-row",{staticStyle:{height:"80px"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[o("el-col",{attrs:{span:24}},[o("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:t.checked},on:{"current-change":t.page}})],1)],1),o("el-dialog",{attrs:{title:t.num,visible:t.centerDialogVisible,width:"32%",center:"","before-close":t.clear},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"180px"}},[o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.form.goods_title,callback:function(e){t.$set(t.form,"goods_title",e)},expression:"form.goods_title"}})],1),o("el-form-item",{attrs:{label:"商品描述"}},[o("el-input",{attrs:{placeholder:"请输入商品描述"},model:{value:t.form.goods_desc,callback:function(e){t.$set(t.form,"goods_desc",e)},expression:"form.goods_desc"}})],1),o("el-form-item",{attrs:{label:"商品进价"}},[o("el-input",{attrs:{placeholder:"请输入商品进价"},model:{value:t.form.goods_price,callback:function(e){t.$set(t.form,"goods_price",e)},expression:"form.goods_price"}})],1),o("el-form-item",{attrs:{label:"商品折扣价"}},[o("el-input",{attrs:{placeholder:"请输入商品折扣价"},model:{value:t.form.goods_original_price,callback:function(e){t.$set(t.form,"goods_original_price",e)},expression:"form.goods_original_price"}})],1),o("el-form-item",{attrs:{label:"商品数量"}},[o("el-input",{attrs:{placeholder:"请输入商品数量"},model:{value:t.form.goods_count,callback:function(e){t.$set(t.form,"goods_count",e)},expression:"form.goods_count"}})],1),o("el-form-item",{attrs:{label:"不发布/发布"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.goods_is_publish,callback:function(e){t.$set(t.form,"goods_is_publish",e)},expression:"form.goods_is_publish"}},t._l(t.val,function(t){return o("el-option",{key:t.id,attrs:{label:t.msg,value:t.id}})}))],1),o("el-form-item",{attrs:{label:"供应商选择"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.goods_supplier_id,callback:function(e){t.$set(t.form,"goods_supplier_id",e)},expression:"form.goods_supplier_id"}},t._l(t.supplierlist,function(t){return o("el-option",{key:t.id,attrs:{label:t.supplier_name,value:t.id}})}))],1),o("el-form-item",{attrs:{label:"二级商品分类选择"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.goods_type_id,callback:function(e){t.$set(t.form,"goods_type_id",e)},expression:"form.goods_type_id"}},t._l(t.second,function(t){return o("el-option",{key:t.id,attrs:{label:t.goods_type_second_name,value:t.id}})}))],1),o("el-form-item",{attrs:{label:"商品图片选择"}},[o("el-upload",{attrs:{action:"","list-type":"picture-card","on-change":t.handlePictureCardPreview,"auto-upload":!1,"on-remove":t.handleRemove,limit:1,"on-exceed":t.file_false,"file-list":t.fileLists}},[o("i",{staticClass:"el-icon-plus"})]),o("el-dialog",{attrs:{visible:t.dialogVisibles},on:{"update:visible":function(e){t.dialogVisibles=e}}},[o("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.clear}},[t._v("取 消")]),"编辑商品"!==t.num?o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")]):t._e(),"编辑商品"==t.num?o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit_edit}},[t._v("确 定")]):t._e()],1)],1),o("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"导入商品信息",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"","on-change":t.handlePreview,limit:1,"on-exceed":t.file_false,"on-remove":t.handleRemove,"auto-upload":!1,"file-list":t.fileList}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")])],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submitUpload}},[t._v("确 定")])],1)],1)],2)},l=[],a=o("a322"),n=o("92d5"),r=o("6cf5"),d=o("4328"),c=o.n(d),g={name:"commodity_home",data:function(){return{num:"",value3:"",state1:"",checked:0,val:[{msg:"不发布",id:"GOODS_NOT_PUBLISH"},{msg:"发布",id:"GOODS_PUBLISH"}],tableData:[],dialogVisible:!1,pages:1,centerDialogVisible:!1,form:{goods_title:"",goods_desc:"",goods_price:"",goods_original_price:"",goods_is_publish:"",goods_count:"",goods_photo:"",goods_type_id:"",goods_supplier_id:""},fileList:[],fileLists:[],supplierlist:[],second:[],dialogImageUrl:"",dialogVisibles:!1}},methods:(i={querySearch:function(t,e){var o=this.restaurants,i=t?o.filter(this.createFilter(t)):o;e(i)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},add_good:function(){this.num="添加商品",this.centerDialogVisible=!0},onSubmit:function(){var t=this,e=c.a.stringify(this.form);Object(n["c"])(e).then(function(e){t.msg(e)})},edit_val:function(t){console.log(t),this.num="编辑商品",this.form={goods_title:t.goods_title,goods_desc:t.goods_desc,goods_price:t.goods_price,goods_original_price:t.goods_original_price,goods_is_publish:t.goods_is_publish,goods_count:t.goods_count,goods_photo:t.goods_photo,goods_type_id:t.goods_type_id,goods_supplier_id:t.goods_supplier_id,id:t.id},this.fileLists=[{name:"aaa",url:this.host+t.goods_photo}],this.centerDialogVisible=!0},onSubmit_edit:function(){var t=this,e={goods_title:this.form.goods_title,goods_desc:this.form.goods_desc,goods_price:this.form.goods_price,goods_original_price:this.form.goods_original_price,goods_is_publish:this.form.goods_is_publish,goods_count:this.form.goods_count,goods_photo:this.form.goods_photo,goods_type_id:this.form.goods_type_id,goods_supplier_id:this.form.goods_supplier_id},o=this.form.id;Object(n["z"])(e,o).then(function(e){t.msg(e)})},land:function(){window.location.href=this.host+"/api/goods/export"},del_val:function(t){var e=this;console.log(t),Object(n["o"])(t.id).then(function(t){e.msg(t)})},page:function(t){console.log(t),this.pages=t,this.init_goods()},init_goods:function(){var t=this,e={page:this.pages,limit:10};Object(n["R"])(e).then(function(e){t.tableData=e.data.data,t.checked=e.data.paginate.total})},msg:function(t){if(t.code)return this.$message({message:t.message,center:!0,type:"success"}),this.clear(),void this.init_goods();Object(r["a"])(t,this)},clear:function(){this.centerDialogVisible=!1,this.dialogVisible=!1,this.form={goods_title:"",goods_desc:"",goods_price:"",goods_original_price:"",goods_is_publish:"",goods_count:"",goods_photo:"",goods_type_id:"",goods_supplier_id:""}},handleClose:function(){this.dialogVisible=!1,this.fileList=[]},submitUpload:function(){var t=this,e=new FormData;e.append("file",this.fileList[0].raw),Object(n["H"])(e).then(function(e){t.msg(e)})},handleRemove:function(t,e){this.fileList=[],this.$set(this.form,"goods_photo","")},handlePreview:function(t){this.fileList.push(t)},file_false:function(){this.$message({message:"已超出最大上传数量！",center:!0,type:"error"})}},Object(a["a"])(i,"handleRemove",function(t,e){console.log(t,e)}),Object(a["a"])(i,"handlePictureCardPreview",function(t){var e=this;if(console.log(t.raw),t.raw.size>2097152)this.$message({message:"请选择小于2M的图片！",center:!0,type:"error"});else{var o=new FormData;o.append("image",t.raw),o.append("path","goodsImage"),Object(n["db"])(o).then(function(t){console.log(t.data),e.dialogImageUrl=t.data.imagePath,e.$set(e.form,"goods_photo",t.data.imagePath)})}}),i),mounted:function(){var t=this;Object(n["bb"])().then(function(e){console.log(e),t.supplierlist=e.data.data}),Object(n["T"])().then(function(e){console.log(e),t.second=e.data}),Object(n["l"])().then(function(t){console.log(t)}),this.init_goods()},computed:{host:function(){return this.$store.state.d2admin.host}}},p=g,u=(o("4c73"),o("2877")),_=Object(u["a"])(p,s,l,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-454f.c7eeb96f.js.map