(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33e3"],{1352:function(e,t,a){},"238b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("template",{slot:"header"},[a("el-row",[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:3}},[a("el-alert",{attrs:{title:"Banner管理",type:"info",closable:!1}})],1),a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.add_good}},[e._v("添加")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"Banner图片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"180px"},attrs:{src:e.host+t.row.banner_image_address,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"banner_href_address",label:"图片跳转地址",width:"180"}}),a("el-table-column",{attrs:{prop:"created_at",label:"开始时间"}}),a("el-table-column",{attrs:{prop:"updated_at",label:"更新时间"}}),a("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){e.edit_type(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(a){e.del_val(t.row)}}},[e._v("删除")])]}}])})],1),a("el-row",{staticStyle:{height:"80px"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.checked},on:{"current-change":e.page}})],1)],1),a("el-dialog",{attrs:{title:e.num,visible:e.centerDialogVisible,width:"30%",center:"","before-close":e.clear},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"选择banner图"}},[a("el-upload",{attrs:{action:"","list-type":"picture-card","file-list":e.fileList,limit:1,"on-exceed":e.file_false,"auto-upload":!1,"on-change":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-plus"})])],1),a("el-form-item",{attrs:{label:"banner跳转地址"}},[a("el-input",{attrs:{placeholder:"请输入banner跳转地址"},model:{value:e.form.banner_href_address,callback:function(t){e.$set(e.form,"banner_href_address",t)},expression:"form.banner_href_address"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.clear}},[e._v("取 消")]),"编辑banner"!==e.num?a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")]):e._e(),"编辑banner"==e.num?a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit_type}},[e._v("确 定")]):e._e()],1)],1)],2)},r=[],i=a("92d5"),s=a("6cf5"),o=a("4328"),l=a.n(o),c={name:"Banner_manage_home",data:function(){return{num:"",value3:"",state1:"",checked:0,tableData:[],dialogVisible:!1,pages:1,centerDialogVisible:!1,form:{banner_image_address:"",banner_href_address:""},fileList:[]}},methods:{querySearch:function(e,t){var a=this.restaurants,n=e?a.filter(this.createFilter(e)):a;t(n)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},add_good:function(){this.num="添加banner",this.centerDialogVisible=!0},onSubmit:function(){var e=this,t=l.a.stringify(this.form);Object(i["a"])(t).then(function(t){e.msg(t)})},handleRemove:function(e,t){console.log(e,t),this.fileList=[],this.$set(this.form,"banner_image_address","")},handlePictureCardPreview:function(e){var t=this;if(e.raw.size>2097152)this.$message({message:"请选择小于2M的图片！",center:!0,type:"error"});else{var a=new FormData;a.append("image",e.raw),a.append("path","banner"),Object(i["db"])(a).then(function(e){console.log(e.data),t.$set(t.form,"banner_image_address",e.data.imagePath)})}},file_false:function(){this.$message({message:"已超出最大上传数量！",center:!0,type:"error"})},edit_type:function(e){this.num="编辑banner",this.form={banner_image_address:e.banner_image_address,banner_href_address:e.banner_href_address,id:e.id},this.fileList=[{name:"aaa",url:this.host+e.banner_image_address}],this.centerDialogVisible=!0},onSubmit_type:function(){var e=this,t={banner_image_address:this.form.banner_image_address,banner_href_address:this.form.banner_href_address},a=this.form.id;Object(i["x"])(t,a).then(function(t){e.msg(t)})},del_val:function(e){var t=this;console.log(e),Object(i["m"])(e.id).then(function(e){t.msg(e)})},page:function(e){console.log(e),this.pages=e,this.init_goods()},init_goods:function(){var e=this,t={page:this.pages,limit:10};Object(i["P"])(t).then(function(t){e.tableData=t.data.data,e.checked=t.data.paginate.total})},msg:function(e){if(e.code)return this.$message({message:e.message,center:!0,type:"success"}),this.clear(),void this.init_goods();Object(s["a"])(e,this)},clear:function(){this.centerDialogVisible=!1,this.form={banner_image_address:"",banner_href_address:""},this.fileList=[]}},mounted:function(){this.init_goods()},computed:{host:function(){return this.$store.state.d2admin.host}}},d=c,u=(a("8f3a"),a("2877")),f=Object(u["a"])(d,n,r,!1,null,null,null);t["default"]=f.exports},"8f3a":function(e,t,a){"use strict";var n=a("1352"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-33e3.943baa85.js.map